sap.ui.define(["./BaseController","sap/ui/model/Filter","sap/ui/model/FilterType","sap/ui/model/FilterOperator"],function(t,e,i,n){"use strict";return t.extend("com.exercise.onlinestoresapui5.controller.ProductCatalog",{onOpenDetails:function(t){const e=t.getSource();this.navTo("details",{path:window.encodeURIComponent(e.getBindingContext("mockdata").getPath().slice(1))})},onProductCatalogUpdateFinished(t){const e=t.getSource();const i=e.getBinding("items");const n=this.getModel("mockdata");const o=i.aKeys.map(t=>n.getData(`/${t}`));this._configureRangeFilter(this.byId("idFilterPrice"),o,"Price");this._configureRangeFilter(this.byId("idFilterStock"),o,"Stock")},_configureRangeFilter(t,e,i){if(!t.getRange()[0]){const n=e.reduce((t,e)=>t<e[i]?t:e[i],Number.MAX_SAFE_INTEGER);const o=e.reduce((t,e)=>t>e[i]?t:e[i],0);t.setMin(n);t.setMax(o);t.setRange([n,o])}},_applyFilters:function(t,e){const n=this.byId("idProductCatalog");const o=n.getBinding("items");let a=o.getFilters(i.Application);a=a.filter(t=>t.getPath()!==e);a=[...a,...t];o.filter(a,i.Application)},_applyListFilter:function(t,i){const o=[];const a=t.getSource().getSelectedItems();a.forEach(t=>{o.push(new e(i,n.EQ,t.getTitle()))});this._applyFilters(o,i)},_applyRangeFilter:function(t,i){const o=[];const a=t.getSource().getRange();o.push(new e(i,n.BT,a[0],a[1]));this._applyFilters(o,i)},onSearch:function(t){const i=[];const o=t.getSource().getValue();if(o&&o.length>0){i.push(new e("Title",n.Contains,o))}this._applyFilters(i,"Title")},onFilterCategorySelectionChange:function(t){this._applyListFilter(t,"Category")},onFilterBrandSelectionChange:function(t){this._applyListFilter(t,"Brand")},onFilterPriceChange:function(t){this._applyRangeFilter(t,"Price")},onFilterStockChange:function(t){this._applyRangeFilter(t,"Stock")}})});