sap.ui.define(["./BaseController","sap/ui/model/Filter","sap/ui/model/FilterOperator","sap/m/ButtonType","../model/constants"],function(t,e,o,s,n){"use strict";return t.extend("com.exercise.onlinestoresapui5.controller.Details",{onInit:function(){const t=this.getRouter();t.getRoute("details").attachPatternMatched(this._onPatternMatched,this)},onOpenCart:function(){this.navTo("cart")},_onPatternMatched:function(t){const s=+t.getParameter("arguments").id;this.getView().bindElement({path:`/ZMK_C_PRODUCT(${s})`,model:"mockdata"});const n=[];n.push(new e("ProductID",o.EQ,s));const i=this.byId("idMediaGallery");const a=i.getBinding("items");a.filter(n);const r=this.byId("idAddToCartButton");this._setAddToCartButtonAttributes(s,r);const u=this.byId("idQuantityStepInput");this._setQuantityStepInputAttributes(s,u)},onAddToCart:function(t){const e=t.getSource();const o=e.getBindingContext("mockdata");const s=o.getObject();const n=this.byId("idQuantityStepInput");if(!this.oCart.has(s.ID)){this.oCart.add(s.ID,n.getValue(),s.Price)}else{this.oCart.drop(s.ID)}this._refreshCartModel();this._refreshLocalDataModel();this._setAddToCartButtonAttributes(s.ID,e)},onBuyNow:function(t){const e=t.getSource();const o=e.getBindingContext("mockdata");const s=o.getObject();const i=this.byId("idQuantityStepInput");if(!this.oCart.has(s.ID)){this.oCart.add(s.ID,i.getValue(),s.Price)}this._refreshCartModel();this._refreshLocalDataModel();this.navTo("cart",{"?query":{action:n.actions.buyNow}})},_setAddToCartButtonAttributes:function(t,e){const o=this.getResourceBundle();if(this.oCart.has(t)){e.setType(s.Success);e.setText(o.getText("productCatalogDropFromCartButtonText"))}else{e.setType(s.Default);e.setText(o.getText("productCatalogAddToCartButtonText"))}},_setQuantityStepInputAttributes:function(t,e){const o=this.oCart.has(t);if(o){e.setValue(o.q)}else{e.setValue(1)}}})});
//# sourceMappingURL=Details.controller.js.map